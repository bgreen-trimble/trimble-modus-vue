<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Redirecting...</title>
  <script>
    // Single Page Apps for GitHub Pages
    // MIT License
    // https://github.com/rafgraph/spa-github-pages
    // Modified for Trimble Modus Vue
    (function() {
      // Get the current URL info
      const l = window.location;
      
      // For GitHub project pages, we need to keep the first segment (repo name)
      const pathSegmentsToKeep = 1;
      
      // Get the repository name from the path
      const repoName = l.pathname.split('/')[1];
      
      // Extract the path segments after the repository name
      // This will be used by the router
      const pathAfterRepo = l.pathname
        .split('/')
        .slice(pathSegmentsToKeep + 1)
        .join('/');
      
      // Construct the path to save (includes repo name for proper navigation)
      const fullPath = '/' + repoName + 
                       (pathAfterRepo ? '/' + pathAfterRepo : '') + 
                       l.search + 
                       l.hash;
      
      // Log what we're doing (for debugging)
      console.log('404.html redirect: Saving path', fullPath);
      
      // Save to localStorage for the main app to use
      localStorage.setItem('redirectPath', fullPath);
      
      // Redirect to the root of the site (with repo name)
      const redirectUrl = 
        l.protocol + '//' + 
        l.hostname + 
        (l.port ? ':' + l.port : '') + 
        '/' + repoName + '/';
      
      console.log('404.html redirect: Redirecting to', redirectUrl);
      
      // Perform the redirect
      l.replace(redirectUrl);
    })();
  </script>
</head>
<body>
  <p>Redirecting to home page...</p>
</body>
</html>
